<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å•ç­”ç¶²é </title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }

        #question-container {
            text-align: center;
            margin-bottom: 20px;
            border-radius: 20px;
        }

        #question-input {
            margin: 0px 0px 10px 0px; /* ä¸Š å³ ä¸‹ å·¦ */
            height: 40px; /* èª¿æ•´æå•æ¬„çš„é«˜åº¦ */
            padding: 5px; /* å¢åŠ å…§éƒ¨å¡«å…… */
            border-radius: 20px;
        }

        #answer-input {
            margin: 0px 5px 0px 0px; /* ä¸Š å³ ä¸‹ å·¦ */
            height: 40px; /* èª¿æ•´æå•æ¬„çš„é«˜åº¦ */
            padding: 5px; /* å¢åŠ å…§éƒ¨å¡«å…… */
            border-radius: 20px;
        }

        #question-buttons {
            margin-top: 10px; /* èˆ‡ä¸Šæ–¹çš„å•é¡Œè¼¸å…¥æ¡†æœ‰ä¸€å€‹é–“è· */
            border-radius: 20px;
        }

        #submit-button {
            background-color: #3498db; /* è—è‰²èƒŒæ™¯ */
            color: #fff; /* ç™½è‰²æ–‡å­— */
            border: none; /* å»é™¤é‚Šæ¡† */
            padding: 10px 15px; /* èª¿æ•´æŒ‰éˆ•å…§éƒ¨å¡«å…… */
            cursor: pointer;
            border-radius: 20px;
            margin-left: 5px; /* æäº¤æŒ‰éˆ•å’Œè¼¸å…¥æ¡†ä¹‹é–“çš„é–“è· */
        }

        #questions-list {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
        }

        .question {
            width: 24%;
            box-sizing: border-box;
            margin: 0 0 10px 0; /* ä¸Š å³ ä¸‹ å·¦ */
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 20px;
        }

        .answer {
            margin-left: 20px;
            color: #555;
        }

        .like-button {
            background-color: #3498db; 
            color: white; /* White text */
            padding: 8px 10px; /* Padding */
            border: none; /* No border */
            border-radius: 5px; /* Rounded corners */
            cursor: pointer; /* Cursor on hover */
            margin-right: 5px; /* Margin between like button and answer text */
        }
    </style>
</head>
<body>
    <div id="question-container">
        <h2>æå•</h2>
        <input type="text" id="question-input" placeholder="è¼¸å…¥ä½ çš„å•é¡Œ">
        <div id="question-buttons">
            <button onclick="addQuestion()" id="submit-button">æäº¤å•é¡Œ</button>
        </div>
    </div>

    <div id="questions-list">
        <!-- é€™è£¡å°‡é¡¯ç¤ºå•é¡Œåˆ—è¡¨ -->
    </div>

    <script>
        document.getElementById("question-input").addEventListener("keyup", function (event) {
            if (event.key === "Enter") {
                addQuestion();
            }
        });
    
        function addQuestion() {
            var questionInput = document.getElementById("question-input");
            var questionText = questionInput.value;
    
            if (questionText.trim() === "") {
                alert("è«‹è¼¸å…¥å•é¡Œï¼");
                return;
            }
    
            var questionElement = document.createElement("div");
            questionElement.className = "question";
            questionElement.innerHTML = "<h3>" + questionText + "</h3>";
    
            // åœ¨é€™è£¡ç‚ºæ¯å€‹å•é¡Œæ·»åŠ ä¸€å€‹ç­”æ¡ˆæ•¸çµ„
            questionElement.answers = [];
            questionElement.likes = 0; // åˆå§‹è®šæ•¸ç‚º0
    
            var answerContainer = document.createElement("div");
            answerContainer.className = "answer-container";
            questionElement.appendChild(answerContainer);
    
            var answerInput = document.createElement("input");
            answerInput.id = "answer-input";
            answerInput.type = "text";
            answerInput.placeholder = "å›ç­”é€™å€‹å•é¡Œ";
    
            var answerButton = document.createElement("button");
            answerButton.id = "submit-button";
            answerButton.innerHTML = "å›ç­”";
            answerButton.onclick = function () {
                submitAnswer(questionElement, answerInput);
            };
    
            answerInput.addEventListener("keyup", function (event) {
                if (event.key === "Enter") {
                    submitAnswer(questionElement, answerInput);
                }
            });
    
            questionElement.appendChild(answerInput);
            questionElement.appendChild(answerButton);
    
            var questionsList = document.getElementById("questions-list");
            questionsList.appendChild(questionElement);
    
            questionInput.value = "";
        }
    
        function submitAnswer(questionElement, answerInput) {
            var answerText = answerInput.value;
            if (answerText.trim() === "") {
                alert("è«‹è¼¸å…¥å›ç­”ï¼");
                return;
            }
        
            // ç‚ºæ¯å€‹ç­”æ¡ˆå‰µå»ºç¨ç«‹çš„æŒ‰è®šæ•¸çµ„
            var answer = {
                text: answerText,
                likes: 0
            };
        
            // æ·»åŠ ç­”æ¡ˆåˆ°å•é¡Œçš„ç­”æ¡ˆæ•¸çµ„ä¸­
            questionElement.answers.push(answer);
        
            // æ¸…ç©ºç­”æ¡ˆè¼¸å…¥æ¡†
            answerInput.value = "";
        
            // æ¸²æŸ“ç­”æ¡ˆï¼ŒåŒ…æ‹¬æ–°æ·»åŠ çš„ç­”æ¡ˆ
            sortAnswers(questionElement);
        }        
        
        function submitReply(answer, replyInput) {
            var replyText = replyInput.value;
            if (replyText.trim() === "") {
                alert("è«‹è¼¸å…¥å›è¦†ï¼");
                return;
            }

            // å‰µå»ºä¸€å€‹æ–°çš„å›è¦†å°è±¡
            var reply = {
                text: replyText,
                replies: [] // æ–°å›è¦†çš„å›è¦†æ•¸çµ„ 
            };

            // æ·»åŠ å›è¦†åˆ°ç­”æ¡ˆçš„å›è¦†æ•¸çµ„ä¸­
            answer.replies = answer.replies || [];
            answer.replies.push(reply);

            // æ¸…ç©ºå›è¦†è¼¸å…¥æ¡†
            replyInput.value = "";

            // æ¸²æŸ“å›ç­”ï¼ŒåŒ…æ‹¬æ–°æ·»åŠ çš„å›è¦†
            sortAnswers(answer);
        }

        function sortAnswers(questionElement) {
            // ç²å–è©²å•é¡Œçš„ç­”æ¡ˆæ•¸çµ„
            var answers = questionElement.answers;

            // æŒ‰ç…§å›ç­”çš„å›è¦†æ•¸é‡é€²è¡Œæ’åºï¼Œä¸¦ä¿æŒç›¸åŒæ•¸é‡çš„åŸæœ‰é †åº
            answers.sort(function (a, b) {
                if (!a.replies) a.replies = [];
                if (!b.replies) b.replies = [];

                return b.replies.length - a.replies.length;
            });

            // æ¸…ç©ºåŸæœ‰çš„ç­”æ¡ˆå€åŸŸ
            var answerContainer = questionElement.querySelector(".answer-container");
            answerContainer.innerHTML = "";

            // å°‡æ’åºå¾Œçš„ç­”æ¡ˆæ·»åŠ å›ç­”æ¡ˆå€åŸŸ
            answers.forEach(function (answer) {
                var answerElement = document.createElement("div");
                answerElement.className = "answer";
                answerElement.innerHTML = "<strong>å›ç­”ï¼š</strong>" + answer.text;

                var likeButton = document.createElement("button");
                likeButton.className = "like-button";
                likeButton.innerHTML = "ğŸ‘ " + answer.likes;
                likeButton.onclick = function () {
                    likeAnswer(answer, questionElement);
                };

                answerElement.appendChild(likeButton);
                answerContainer.appendChild(answerElement);

                // æ¸²æŸ“å›è¦†
                if (answer.replies && answer.replies.length > 0) {
                    var replyContainer = document.createElement("div");
                    replyContainer.className = "reply-container";

                    answer.replies.forEach(function (reply) {
                        var replyElement = document.createElement("div");
                        replyElement.className = "reply";
                        replyElement.innerHTML = "<strong>å›è¦†ï¼š</strong>" + reply.text;

                        // æ–°å¢å›è¦†è¼¸å…¥æ¡†å’ŒæŒ‰éˆ•
                        var replyInput = document.createElement("input");
                        replyInput.id = "reply-input";
                        replyInput.type = "text";
                        replyInput.placeholder = "å›è¦†é€™å€‹å›è¦†";

                        var replyButton = document.createElement("button");
                        replyButton.id = "reply-button";
                        replyButton.innerHTML = "å›è¦†";
                        replyButton.onclick = function () {
                            submitReply(reply, replyInput);
                        };

                        replyInput.addEventListener("keyup", function (event) {
                            if (event.key === "Enter") {
                                submitReply(reply, replyInput);
                            }
                        });

                        replyElement.appendChild(replyInput);
                        replyElement.appendChild(replyButton);

                        replyContainer.appendChild(replyElement);
                    });

                    answerElement.appendChild(replyContainer);
                }

                // æ–°å¢å›è¦†è¼¸å…¥æ¡†å’ŒæŒ‰éˆ•
                var replyInput = document.createElement("input");
                replyInput.id = "reply-input";
                replyInput.type = "text";
                replyInput.placeholder = "å›è¦†é€™å€‹å›ç­”";

                var replyButton = document.createElement("button");
                replyButton.id = "reply-button";
                replyButton.innerHTML = "å›è¦†";
                replyButton.onclick = function () {
                    submitReply(answer, replyInput);
                };

                replyInput.addEventListener("keyup", function (event) {
                    if (event.key === "Enter") {
                        submitReply(answer, replyInput);
                    }
                });

                answerElement.appendChild(replyInput);
                answerElement.appendChild(replyButton);
            });
        }
    
        function likeAnswer(answer, questionElement) {
            // æ›´æ–°ç­”æ¡ˆçš„è®šæ•¸
            answer.likes += 1;

            // èª¿ç”¨ sortAnswers æ›´æ–°æ’åº
            sortAnswers(questionElement);
        }

        function updateLikeButton(answer, questionElement) {
            // æ‰¾åˆ°å°æ‡‰çš„æŒ‰è®šæŒ‰éˆ•
            var answerContainer = questionElement.querySelector(".answer-container");
            var likeButton = answerContainer.querySelector(".like-button");

            // æ›´æ–°æŒ‰è®šæŒ‰éˆ•çš„å…§å®¹
            likeButton.innerHTML = "ğŸ‘ " + answer.likes;
        }
    </script>
</body>
</html>
